# TopchiOutpost Cafe Management System - Environment Configuration
# 
# This file contains all environment variables needed for production deployment
# Copy this file to .env and fill in your specific values
#
# @author TopchiOutpost Development Team
# @version 2.0.0
# @since 2025-01-01

# ========================================================================================
# SERVER CONFIGURATION
# ========================================================================================

# Server port (default: 3000)
PORT=3000

# Node environment (development, production, test)
NODE_ENV=production

# Upload directory path (optional, defaults to ../uploads)
UPLOAD_DIR=/path/to/uploads

# ========================================================================================
# DATABASE CONFIGURATION
# ========================================================================================

# MongoDB connection URI with connection pooling support
# Format: mongodb://username:password@host:port/database
# For MongoDB Atlas: mongodb+srv://username:password@cluster.mongodb.net/database
MONGODB_URI=mongodb://localhost:27017/topchioutpost

# ========================================================================================
# CACHE CONFIGURATION
# ========================================================================================

# Redis connection URL (optional, falls back to memory cache if not provided)
# Local Redis: redis://localhost:6379
# Redis Cloud: redis://username:password@host:port
# Heroku Redis: Set automatically by Heroku addon
REDIS_URL=redis://localhost:6379

# Alternative Redis URL (for cloud providers like RedisLabs)
REDISCLOUD_URL=

# ========================================================================================
# SECURITY CONFIGURATION
# ========================================================================================

# JWT secret key for authentication (use a strong, random string in production)
JWT_SECRET=your-super-secret-jwt-key-change-this-in-production

# JWT token expiration time (e.g., 1d, 7d, 30d)
JWT_EXPIRES_IN=7d

# Admin IP whitelist (comma-separated IPs, optional)
# Example: 192.168.1.100,203.0.113.50
ADMIN_IP_WHITELIST=

# ========================================================================================
# IMAGE PROCESSING CONFIGURATION
# ========================================================================================

# ImageKit configuration (if using ImageKit for image processing)
IMAGEKIT_PUBLIC_KEY=your-imagekit-public-key
IMAGEKIT_PRIVATE_KEY=your-imagekit-private-key
IMAGEKIT_URL_ENDPOINT=https://ik.imagekit.io/your-endpoint

# ========================================================================================
# EMAIL CONFIGURATION (for notifications)
# ========================================================================================

# SMTP configuration for sending emails
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-password

# From email address
FROM_EMAIL=noreply@topchioutpost.com

# ========================================================================================
# RATE LIMITING CONFIGURATION
# ========================================================================================

# Rate limiting window in minutes (default: 15)
RATE_LIMIT_WINDOW_MS=15

# General API rate limit per window (default: 100)
RATE_LIMIT_MAX_REQUESTS=100

# Auth endpoints rate limit per window (default: 5)
AUTH_RATE_LIMIT_MAX=5

# Upload endpoints rate limit per window (default: 20)
UPLOAD_RATE_LIMIT_MAX=20

# ========================================================================================
# CACHE TTL CONFIGURATION (in seconds)
# ========================================================================================

# Short-term cache TTL (default: 300 seconds = 5 minutes)
CACHE_TTL_SHORT=300

# Medium-term cache TTL (default: 1800 seconds = 30 minutes)
CACHE_TTL_MEDIUM=1800

# Long-term cache TTL (default: 3600 seconds = 1 hour)
CACHE_TTL_LONG=3600

# Very long-term cache TTL (default: 86400 seconds = 24 hours)
CACHE_TTL_VERY_LONG=86400

# ========================================================================================
# COMPRESSION CONFIGURATION
# ========================================================================================

# Compression level (0-9, default: 6)
COMPRESSION_LEVEL=6

# Compression threshold in bytes (default: 1024)
COMPRESSION_THRESHOLD=1024

# ========================================================================================
# IMAGE OPTIMIZATION CONFIGURATION
# ========================================================================================

# WebP quality (1-100, default: 85)
WEBP_QUALITY=85

# JPEG quality (1-100, default: 90)
JPEG_QUALITY=90

# PNG quality (1-100, default: 95)
PNG_QUALITY=95

# Generate responsive images (true/false, default: true)
GENERATE_RESPONSIVE_IMAGES=true

# Convert images to WebP (true/false, default: true)
CONVERT_TO_WEBP=true

# ========================================================================================
# MONITORING AND LOGGING
# ========================================================================================

# Enable detailed logging (true/false, default: false in production)
DEBUG_MODE=false

# Log level (error, warn, info, debug)
LOG_LEVEL=info

# Enable performance monitoring (true/false)
ENABLE_PERFORMANCE_MONITORING=true

# ========================================================================================
# CDN CONFIGURATION (optional)
# ========================================================================================

# CDN URL for serving static assets
CDN_URL=https://cdn.topchioutpost.com

# CloudFront distribution ID (for AWS)
CLOUDFRONT_DISTRIBUTION_ID=

# ========================================================================================
# DATABASE OPTIMIZATION SETTINGS
# ========================================================================================

# MongoDB connection pool settings
DB_MAX_POOL_SIZE=10
DB_MIN_POOL_SIZE=5
DB_MAX_IDLE_TIME_MS=30000
DB_SERVER_SELECTION_TIMEOUT_MS=5000

# Auto-create indexes in development only (true/false)
DB_AUTO_INDEX=false

# Auto-create collections in development only (true/false)
DB_AUTO_CREATE=false

# ========================================================================================
# CORS CONFIGURATION
# ========================================================================================

# Allowed origins (comma-separated URLs)
CORS_ORIGIN=https://your-frontend-domain.com,http://localhost:5173

# CORS credentials (true/false)
CORS_CREDENTIALS=true

# CORS preflight cache duration in seconds
CORS_MAX_AGE=86400

# ========================================================================================
# DEVELOPMENT CONFIGURATION
# ========================================================================================

# Enable cache warming on startup (true/false, recommended for production)
ENABLE_CACHE_WARMING=true

# Enable request logging (true/false)
ENABLE_REQUEST_LOGGING=false

# Enable SQL query logging (true/false, development only)
ENABLE_QUERY_LOGGING=false

# ========================================================================================
# EXAMPLE PRODUCTION VALUES
# ========================================================================================
# 
# Here are some example configurations for different deployment scenarios:
#
# --- Heroku Deployment ---
# PORT=$PORT (automatically set by Heroku)
# NODE_ENV=production
# MONGODB_URI=mongodb+srv://user:pass@cluster.mongodb.net/database
# REDIS_URL=$REDIS_URL (automatically set by Heroku Redis addon)
# JWT_SECRET=random-256-bit-string
#
# --- Digital Ocean App Platform ---
# PORT=8080
# NODE_ENV=production
# MONGODB_URI=${DATABASE_URL}
# REDIS_URL=${REDIS_URL}
#
# --- AWS Elastic Beanstalk ---
# PORT=3000
# NODE_ENV=production
# MONGODB_URI=mongodb://your-rds-endpoint/database
# REDIS_URL=redis://your-elasticache-endpoint:6379
#
# ========================================================================================
